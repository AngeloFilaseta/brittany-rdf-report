\section{Design}

\subsection{Ubiquitous Language}
Viene di seguito illustrato come è stato definito l’Ubiquitous Language utilizzato nel sistema. Viene riportato il solo sottoinsieme di componenti di interesse per il progetto RDF. Verranno riportati in questa relazione solo alcuni dei concetti significativi, in quanto RDF è la tecnologia più adatta a modellare e definire l'Ubiquitous Language, ed è quindi possibile approfondire visionando il documento \textit{brittany.ttl}. Tra parentesi viene riportato il nome in italiano.

\begin{itemize}
	\item \textbf{Greenhouse (Serra)}: Una struttura artificiale suddiviso in \textit{ambienti} costruita appositamente per coltivare \textit{piante}.
	\item \textbf{Environment (Ambiente)}: Sezione di una \textit{serra} che contiene più \textit{piante}. Una \textit{serra} è composta da almeno un \textit{ambiente}.
	\item \textbf{Plant (Pianta)}: Unità vegetale contenuta all’interno di un \textit{ambiente} della \textit{serra}.
	\item \textbf{Edge (Edge)}: Una macchina elettronica che colleziona dati da \textit{sensori} e che può manipolare degli \textit{attuatori}. Un \textit{Edge} è composto da \textit{moduli}. Un \textit{Edge} può essere posizionato in un \textit{ambiente} o su una \textit{pianta}.
	\item \textbf{Module (Module)}: Un componente logico che può essere aggiunto ad un \textit{Edge} ed è composto da più \textit{Operation Handler}.
	\item \textbf{Operation Handler (Operation Handler)}: Un'operazione che utilizza degli argomenti per della computazione e ritorna un risultato.
	\item \textbf{Hardware Component (Componente Hardware)}: Un Componente Hardware che può essere utilizzato da un Operation Handler.
\end{itemize}

\subsection{RDF e RDFS}

\centeredImage{img/brittany-rdf-graph.png}{Diagramma sommario delle classi e delle proprietà}{0.8}

\noindent Il dominio è stato modellato utilizzando l'Ubiquitous Language appena illustrato. Sono stati inoltre ovviamente aggiunti elementi più di dettaglio e di basso livello, come le classi e le proprietà che fanno parte delle gerarchie "is a", più specifiche e per ora ancora mai nominate.
\subsubsection{Concetti (Classi)}
Seguono gli identificatori delle classi utilizzate. Vengono riportate alcune note importanti. Dettagli più accurati ed approfonditi sono riportati nel file RDF \textit{brittany.ttl}:

\paragraph{<\#Greenhouse>}
Utilizzato per modellare il concetto di Serra.
\paragraph{<\#Monitorable>}
Utilizzato per modellare il concetto di un "qualcosa" che può essere controllato da una classe di tipo <\#Edge>. <\#Environment> e <\#Plant> sono sottoclassi di questa classe.
\paragraph{<\#Environment>}
Utilizzato per modellare il concetto di Ambiente.
\paragraph{<\#Plant>}
Utilizzato per modellare il concetto di Pianta.
\paragraph{<\#Edge>}
Utilizzato per modellare il concetto di Edge.
\paragraph{<\#Module>}
Utilizzato per modellare il concetto di Modulo.
\paragraph{<\#ComponentModule>}
Si tratta di una specializzazione di Module che agisce necessariamente su dei componenti hardware (\#ComponentHw).
\paragraph{<\#DigitalLightModule>}
Una specializzazione di <\#ComponentModule> che si occupa del sistema di illuminazione.
\paragraph{<\#OperationHandler>}
Utilizzato per modellare il concetto di Operation Handler.
\paragraph{<\#ComponentOperationHandler>}
Specializzazione di <\#OperationHandler> che agisce necessariamente su dei componenti hardware (<\#ComponentHw>).
\paragraph{<\#ActionOperationHandler>}
Specializzazione di <\#OperationHandler> utilizzata per definire un'operazione che effettua un'azione.
\paragraph{<\#PropertyOperationHandler>}
Specializzazione di <\#OperationHandler> utilizzata per definire un'operazione che ricava una proprietà.
\paragraph{<\#DigitalLightHandler>}
Specializzazione di <\#ComponentOperationHandler> per definire operazioni legate al sistema di illuminazione.
\paragraph{<\#IsOnDigitalLightHandler>}
Specializzazione di <\#DigitalLightHandler> e di <\#PropertyOperationHandler>. L'operazione si occupa di verificare se un determinato componente che fa parte del sistema di illuminazione è acceso.
\paragraph{<\#TurnOnDigitalLightHandler>}
Specializzazione di <\#DigitalLightHandler> e di \#PropertyOperationHandler. L'operazione si occupa di accendere un determinato componente che fa parte del sistema di illuminazione.
\paragraph{<\#TurnOffDigitalLightHandler>}
Specializzazione di <\#DigitalLightHandler> e di \#PropertyOperationHandler. L'operazione si occupa di spegnere un determinato componente che fa parte del sistema di illuminazione.
\paragraph{<\#ComponentHw>}
Utilizzato per modellare il concetto di Componente Hardware.
\paragraph{<\#SensorHw>}
Specializzazione di <\#ComponentHw>. Un componente che ricava dati dall'area circostante.
\paragraph{<\#ActuatorHw>}
Specializzazione di <\#ComponentHw>. Un componente che agisce sull'area circostante.
\paragraph{<\#DigitalLightHw>}
Specializzazione di <\#ActuatorHw>. Un attuatore che si occupa del sistema di illuminazione.

\subsubsection{Relazioni (Proprietà)}
Seguono gli identificatori delle proprietà utilizzate. Vengono riportate alcune note importanti. Dettagli più accurati ed approfonditi sono riportati nel file RDF \textit{brittany.ttl}:

\paragraph{<\#hasEnvironments>}
Proprietà utilizzata per modellare il fatto che esistono più <\#Environment> (almeno uno) all'interno di un <\#Greenhouse>.
\paragraph{<\#hasPlants>}
Proprietà utilizzata per modellare il fatto che esistono più <\#Plant> all'interno di un <\#Environment>.
\paragraph{<\#monitor>}
Proprietà utilizzata per modellare il fatto che un <\#Edge> può essere posto in un qualsiasi <\#Monitorable>.
\paragraph{<\#monitorPlant>}
Specializzazione di <\#monitor> dedicata al monitor di un <\#Plant>.
\paragraph{<\#monitorEnvironment>}
Specializzazione di <\#monitor> dedicata al monitor di una <\#Environment>.
\paragraph{<\#hasComponents>}
Proprietà utilizzata per modellare il fatto che esistono più <\#ComponentHw> (almeno uno) all'interno di un <\#ComponentModule>.
\paragraph{<\#hasModules>}
Proprietà utilizzata per modellare il fatto che esistono più <\#Module> (almeno uno) all'interno di un <\#Edge>.
\paragraph{<\#edgeName>}
Specializzazione di foaf:name utilizzata per dare un nome ad un <\#Edge>.
\paragraph{<\#moduleName>}
Specializzazione di foaf:name utilizzata per dare un nome ad un <\#Module>.
\paragraph{<\#handlerName>}
Specializzazione di foaf:name utilizzata per dare un nome ad un <\#Handler>.
\paragraph{<\#componentName>}
Specializzazione di foaf:name utilizzata per dare un nome ad un <\#ComponentHw>.
\paragraph{<\#hasHandlers>}
Proprietà utilizzata per modellare il fatto che esistono più <\#OperationHandler> (almeno uno) all'interno di un <\#Module>.
\paragraph{<\#hasHandlerOutputType>}
Proprietà utilizzata per definire il tipo di output fornito da un <\#OperationHandler>.
\paragraph{<\#hasHandlerInputSchema>}
Proprietà utilizzata per definire quali tipi di dati possono essere forniti in input ad un <\#OperationHandler>.
\paragraph{<\#hasThingDescriptor>}
Proprietà utilizzata per legare un <\#Edge> al suo Thing Descriptor (td:Thing).

\subsubsection{Individui}
Sono stati realizzati degli individui di esempio. Nella serra che è stata creata (\textit{<\#angelo-greenhouse>}) è presente un solo ambiente (\textit{<\#angelo-environment>}) che contiene a sua volta una sola pianta (\textit{<\#angelo-basil>}). Il dispositivo Edge che è stato creato (\textit{<\#angelo-edge>}) è composto da un solo modulo che gestisce l'illuminazione (\textit{<\#digital-light-module>}). Quest'ultimo è composto di tre Operation Handler: uno di tipo \textit{<\#IsOnDigitalLightHandler>}, uno di tipo \textit{<\#TurnOnDigitalLightHandler>} ed uno di tipo \textit{<\#TurnOffDigitalLightHandler>}.
Inoltre il modulo comprende due componenti di tipo <\#DigitalLightHw>, che sono proprio i componenti su cui possono interagire i tre Operation Handler appena elencati. Infine il dispositivo edge possiede un Thing Descriptor le cui ActionAffordance e PropertyAffordance sono mappate con quelle di tutti gli Operation Handler di tutti i Moduli che possiede.

\subsection{Riuso di ontologie esistenti}
\subsubsection{DBpedia}
DBpedia contiene Linked Open Data in formato RDF. Le informazioni sono estratte dalle pagine di Wikipedia~\cite{wwwdbped0:online}.
In questo progetto DBpedia è stata utilizzata per reperire concetti piuttosto semplici, in particolare è stata utilizzata la classe Plant attraverso l'ontologia:
\begin{minted}{turtle}
@prefix dbo: <http://dbpedia.org/ontology/> .

dbo:Plant .
\end{minted}
Ed una risorsa di tipo \textit{dbo:Plant}:
\begin{minted}{turtle}
@prefix dbr: <http://dbpedia.org/resource/> .

dbr:Basil .
\end{minted}

\subsubsection{domOS Common Ontology}
~\cite{domOSCom57:online}
\subsubsection{FOAF}
~\cite{FOAFVoca16:online}
\subsubsection{Hypermedia Controls Ontology}
~\cite{Hypermed84:online}
\subsubsection{JSON Schema}
~\cite{JSONSche6:online}
\subsubsection{Machine-to-Machine Measurement (M3)}
~\cite{SWoTSema18:online}
\subsubsection{SEAS Ontology}
~\cite{SEAS:online}
\subsubsection{W3 Thing Descriptor}
~\cite{ThingDes54:online}
\subsubsection{Web of Things (WoT) Security Ontology}
Questa ontologia contiene concetti utilizzati per definire il tipo di sicurezza utilizzato all'interno del Thing Descriptor.~\cite{WebofThi54:online}
Per una configurazione priva meccanismi di sicurezza si può per esempio dichiarare un individuo come segue:
\begin{minted}{turtle}
@prefix wotsec: <https://www.w3.org/2019/wot/security#> .

<#nosec-configuration>
a wotsec:NoSecurityScheme ;
td:hasConfigurationInstance <#no-sec> .
\end{minted}
